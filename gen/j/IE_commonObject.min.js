customScroll=(function(){var a={anchorScrollSpeed:10,pageScrollSpeed:20,clientX:0,clientY:0,type:{0:"vertical",1:"horizontal"},vertical:{func:"height",css1:"top",css2:"height",sSize:"scrollHeight",sStart:"scrollTop"},horizontal:{func:"width",css1:"left",css2:"width",sSize:"scrollWidth",sStart:"scrollLeft"}};var g=function(){var i=function(m,k,n,o){var l=n.scrollToward;var p=0;var r=n[m]["bar"][0];if(k.hasClass("anchor")){p=a.anchorScrollSpeed;var q=k.hasClass("head")?-p:p}else{var t=n[m]["bar"][0].getBoundingClientRect();var s=(m=="vertical"?o.clientY<t.top:o.clientX<t.left)?"head":"foot";p=a.pageScrollSpeed;var q=(s=="head")?-p:p}l.interval=setInterval(function(){if(document.elementFromPoint(a.clientX,a.clientY)==r){clearInterval(b.scrollToward.interval);return}n.scrollToward(m,q)},100)};var j=function(k,l){a.drag={dir:k,obj:l,prev_clientX:a.clientX,prev_clientY:a.clientY}};var h=function(k){var l=this;this[k]["scroll"].mousedown(function(o,m){var n=$(o.target||o.srcElement);if(n.hasClass("bar")||n.hasClass("anchor")){m=n.parent().attr("class").match(/vertical|horizontal/)}else{m=n.attr("class").match(/vertical|horizontal/)}if(n.hasClass("bar")){j(m,l)}else{i(m,n,l,o)}o.preventDefault()}).click(function(m){m.stopPropagation()})};return{mouseEvents:h}};var b={type:{0:"vertical",1:"horizontal"},injectStructure:function(){var k=document.createDocumentFragment();var h=this.elem[0].childNodes;while(h.length){k.appendChild(h[0])}this.cover=$("<div>").addClass("cover");this.content=$("<div>").addClass("matchParent content");this.content.append($(k));var i={minWidth:this.elem.css("min-width"),maxWidth:this.elem.css("max-width"),minHeight:this.elem.css("min-height"),maxHeight:this.elem.css("max-height")};this.content.css(i);this.cover[0].setAttribute("onscroll","this.scrollLeft=this.scrollTop=0");this.cover.append(this.content);this.elem.append(this.cover);function j(l){this[l]={scroll:$("<div>").addClass("csb matchParent "+l),head:$("<div>").addClass("matchParent anchor head"),foot:$("<div>").addClass("matchParent anchor foot"),bar:$("<div>").addClass("bar")};this[l].scroll.append(this[l].head).append(this[l].bar).append(this[l].foot);this.cover.append(this[l].scroll);this.anchorSize=this[l].head[this.getProperty(l,"func")]();this[l].bar[0].style[this.getProperty(l,"css1")]=this.anchorSize+"px"}j.call(this,this.type[0]);j.call(this,this.type[1])},getPaneSize:function(j){var i=this.getProperty(j,"func");var h=this[j].head[i]();var k=this[j].scroll[i]()-h*2;return{aSize:h,pSize:(k>-1)?k:0}},setRatio:function(i){var l=this.getProperty(i,"css1");var j=this.getProperty(i,"css2");var n=this.getProperty(i,"sSize");var h=this.getProperty(i,"sStart");var m=this.getPaneSize(i);var k=Math.pow(m.pSize,2)/this.content[0][n];this[i].bar[0].style[j]=k+"px";this.content[0][h]=this.content[0][n];this[i].maxsSize=this.content[0][h];this.content[0][h]=0;this[i].RATIO=(m.pSize-k)/this[i].maxsSize},isScrollable:function(i){var j=this.getProperty(i,"sSize");j=this.content[0][j];var h=this.getProperty(i,"func");h=this.content[h]();return j>h},show:function(h){var i=h?{0:h}:a.type;for(key in i){h=i[key];if(this.isScrollable(h)){this[h]["scroll"].stop(true,true);this[h]["scroll"].fadeIn("slow")}}},hide:function(h){var i=h?{0:h}:a.type;for(key in i){h=i[key];this[h]["scroll"].fadeOut("slow")}},onScrollSizeUpdate:function(h){if(this.isScrollable(h)){this.setRatio(h);this[h]["scroll"].fadeIn("slow")}},setBarStart:function(h,k){var j=this.getProperty(h,"css1");var i=this.getProperty(h,"func");k=(k*this[h].RATIO)+this.anchorSize;this[h].bar[0].style[j]=k+"px"},onScrollChange:function(){var k=this.getProperty("type");for(key in k){var m=k[key];var i=this[m]._sSize||0;var j=this[m]._sStart||0;var l=this.content[0][this.getProperty(m,"sSize")];var h=this.content[0][this.getProperty(m,"sStart")];if(l!=i){this.onScrollSizeUpdate(m);this[m]._sSize=l}if(h!=j){this.setBarStart(m,h);this[m]._sStart=h}}},getProperty:function(h,i){return i?a[h][i]:a[h]},scrollTo:function(h,i){var j=this.getProperty(h,"sStart");this.content[0][j]=i},scrollToward:function(h,j){var k=this.getProperty(h,"sStart");var i=this.content[0][k];this.content[0][k]+=j},attachEvents:function(){var j=this;var i=a.type;for(key in i){var h=i[key];this.mouseEvents(h)}j.onScrollChange();this.content.on("scroll	",function(k){j.onScrollChange()});this.cover.mouseenter(function(){j.show()}).mouseleave(function(){if(!a.drag){j.hide()}})}};var c=function(h,i){h.csb={reset:function(){i.onScrollChange()},scrollToHead:function(j){},scrollToHead:function(j){},scrollTo:function(){},remove:function(){}}};var f=function(h){this.elem=h;this.injectStructure();this.attachEvents();c(h[0],this)};var d=g();for(key in d){b[key]=d[key]}f.prototype=b;var e=function(){var j=$(".nScroll");if(!window.navigator.userAgent.match(/MSIE 7/)){for(var h=j.length-1;h>-1;h--){j.eq(h).css({overflow:"visisble"});new f(j.eq(h))}j.removeClass("nScroll").addClass("nScrollable")}};$(document).on("mouseup",function(h){a.drag=null;clearInterval(b.scrollToward.interval)}).on("mousemove",function(l){a.clientX=l.clientX;a.clientY=l.clientY;if(a.drag){var j=a.clientX-a.drag.prev_clientX;var h=a.clientY-a.drag.prev_clientY;var m=a.drag.obj;var i=a.drag.dir;var k=((i=="vertical")?h:j)/m[i].RATIO;m.scrollToward(a.drag.dir,k);a.drag.prev_clientX=a.clientX;a.drag.prev_clientY=a.clientY}});return{init:e}}());