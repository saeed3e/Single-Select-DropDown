(function(b){var a;b.fn.singleDD=function(d){var f={maxHeight:200,data:{},width:false,prefillData:false,customScroll:true,sortPrefix:"",callBack:function(){}},e=b.extend({},f,d);function h(l){var p=this,n=l,k=l.attr("id"),q=n.find(".sdTxt"),i=q.attr("name");p.inpTextElm=q.attr({name:"",readonly:"readonly",autocomplete:"off",tabIndex:"-1"});var m=n.find(".dWrap").attr({tabIndex:"0"}),o=e.customScroll?"nScroll":"";p.hidElm=b("<input>").attr({type:"hidden",id:k+"Hid",name:i});var j=e.width&&e.width!="auto"?e.width:n.width()+"px";p.dropCont=b('<div class="sDrop '+o+'"></div>').css({width:j,maxHeight:e.maxHeight});p.currentActive=false;m.append(p.hidElm);n.append(p.dropCont);n.on("mouseenter",function(){p.currentActive=true}).on("mouseleave",function(){p.currentActive=false});m.on("click",".sdTxt, .smArw",function(r){if(p.currentActive){m[0].focus();p.dropCont.css({display:"block"});b(this).parents(".singleDD").addClass("zIndexIE7")}}).on("keydown",function(t){var r=p.keyCode(t),s;if(r==40){s=p.nextSelection.call(p,p.currActiveItem);p.setValue.call(p,s)}else{if(r==38){s=p.prevSelection.call(p,p.currActiveItem);p.setValue.call(p,s)}else{if(r==13){p.currentActive=false;p.onblur(t,b(this));p.currentActive=true}else{if(r==9){p.currentActive=false;p.onblur(t,b(this));p.currentActive=true}}}}}).on("focus",function(r){p.disableScroll(r);p.currActiveItem=p.dropCont.find("li:first-child");!p.inpTextElm.val()?p.currActiveItem.addClass("sAct"):""}).on("blur",function(r){p.onblur(r,b(this))});p.dropCont.on("click","li",function(){var r=b(this).text();var s=p.remDelimiter(b(this).attr("id"),e);if(s){p.inpTextElm.val(r);p.hidElm.attr({value:s});p.dropCont.css({display:"none"});m[0].focus();e.callBack?e.callBack(s):""}else{p.inpTextElm.val("");p.hidElm.attr({value:""})}}).on("mouseover","li",function(){b(this).addClass("sAct")}).on("mouseout","li",function(){b(this).removeClass("sAct")}).html(p.appendData.call(p));p.prefillData(e,p.inpTextElm,k,p.hidElm)}var g={setVal_inHiddenField:function(j,i){this.inpTextElm.val(j);this.hidElm.val(i);e.callBack?e.callBack(i):""},onblur:function(k,i){var j=this;if(!j.currentActive){j.dropCont.css({display:"none"});j.enableScroll(k);i.parents(".singleDD").removeClass("zIndexIE7")}},setValue:function(i){var j=i.attr("id");if(i&&i.length&&i.text().toLowerCase()!=="select"){g.setVal_inHiddenField.call(this,i.text(),this.remDelimiter(j,e))}else{g.setVal_inHiddenField.call(this,"","")}},appendData:function(){var j="";for(var i in e.data){j+='<li id="'+i+'">'+e.data[i]+"</li>"}return"<ul>"+j+"</ul>"},keyCode:function(i){return i.keyCode||i.which},disb_Scroll_handler:function(j){var i=g.keyCode(j);if(i===40||i===38||i===32){j.preventDefault();return false}},disableScroll:function(i){b(window).on("keydown",g.disb_Scroll_handler)},enableScroll:function(i){b(window).off("keydown",g.disb_Scroll_handler)},nextSelection:function(j){var i=j.next();if(i.length){j.removeClass("sAct");this.currActiveItem=i;i.addClass("sAct")}else{i=j}return i},prevSelection:function(j){var i=j.prev();if(i.length){j.removeClass("sAct");this.currActiveItem=i;i.addClass("sAct")}return i},prefillData:function(j,k,l,i){if(j.data[j.prefillData]){k.val(j.data[j.prefillData]);i.attr({value:g.remDelimiter(j.prefillData,j)})}},remDelimiter:function(i,j){return i&&j.sortPrefix?i.replace(j.sortPrefix,""):i}};function c(i){h.call(this,i)}c.prototype=g;this.each(function(){if(!b(this).data("singleDD")){var i=new c(b(this));b(this).data("singleDD",i)}});return this.data("singleDD")}})(jQuery);