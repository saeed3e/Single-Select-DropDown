$(document).click(function(a){if(!$(a.target).parents(".singleDD").length){$(".singleDD .sDrop").slideUp(200)}});var previousOpen;(function(b){var a;b.fn.singleDD=function(d){var f={maxHeight:200,data:{},customScroll:true,placeholderColor:"#a9a9a9",selectColor:"#333",animationSpeed:200},e=b.extend({},f,d);function h(l){var p=this,n=l,k=l.attr("id"),q=n.find(".sdTxt"),i=q.attr("name");p.inpTextElm=q.attr({name:"",readonly:"readonly",autocomplete:"off",tabIndex:"-1"});var m=n.find(".dWrap").attr({tabIndex:"0"}),o=e.customScroll?"nScroll":"";p.hidElm=b("<input>").attr({type:"hidden",id:k+"Hid",name:i});var j=e.width&&e.width!="auto"?e.width:n.width()+"px";p.dropCont=b('<div class="sDrop '+o+'"></div>').css({width:j,maxHeight:e.maxHeight});p.currentActive=false;m.append(p.hidElm);n.append(p.dropCont);p.replaceData=function(r){p.setVal_inHiddenField("","");p.dropCont.find("ul").html(p.appendData(r))};n.on("mouseenter",function(){p.currentActive=true}).on("mouseleave",function(){p.currentActive=false});m.on("click",".sdTxt, .smArw",function(r){if(p.currentActive){m[0].focus();p.dropCont.slideDown(e.animationSpeed,function(){if(p.dropCont[0].csb){p.dropCont[0].csb.reset()}});b(this).parents(".singleDD").addClass("zIndexIE7");e.onOpen?e.onOpen():""}}).on("keydown",function(x){var r=p.keyCode(x),v;var w=p.dropCont.find(":first-child");var s=p.dropCont.find("ul");var t=s.parents(".sDrop");var u=s.parent();if(r==39||r==40){v=p.nextSelection.call(p,p.currActiveItem);p.setValue.call(p,v);ieObj.scrollHandler(u,t,s,w,v)}else{if(r==37||r==38){v=p.prevSelection.call(p,p.currActiveItem);p.setValue.call(p,v);ieObj.scrollHandler(u,t,s,w,v)}else{if(r==9||r==13||r==27){p.currentActive=false;p.onblur(x,b(this));p.currentActive=true}}}}).on("focus",function(r){p.disableScroll(r);p.currActiveItem=p.dropCont.find("li:first-child");!p.inpTextElm.val()?p.currActiveItem.addClass("sAct"):""}).on("blur",function(r){p.enableScroll(r);p.onblur(r,b(this))}).mousedown(function(){return false});p.dropCont.on("click","li",function(){var r=b(this).text();var s=p.remDelimiter(b(this).attr("id"));if(b(this).index()===0){p.setVal_inHiddenField("","")}else{p.setVal_inHiddenField(r,s)}m[0].focus();if(e.callBack){e.callBack(s)}p.dropCont.slideUp(e.animationSpeed);if(e.onChange){e.onChange(s)}}).on("mouseover","li",function(){b(this).addClass("sAct")}).on("mouseout","li",function(){b(this).removeClass("sAct")}).html(p.appendData(e.data));p.prefillData(e,k)}var g={prefillData:function(i,j){if(i.data[i.prefillData]){if(i.callBack){i.callBack(i.prefillData)}g.setVal_inHiddenField.call(this,i.data[i.prefillData],g.remDelimiter(i.prefillData))}},setVal_inHiddenField:function(k,j){var i;if(!jQuery.support.placeholder){if(!k){k=this.inpTextElm.attr("placeholder");i=e.placeholderColor}else{i=e.selectColor}}this.inpTextElm.val(k).css({color:i});this.hidElm.val(j);e.callBack?e.callBack(j):""},onblur:function(k,i){var j=this;if(!j.currentActive){j.dropCont.slideUp(e.animationSpeed);i.parents(".singleDD").removeClass("zIndexIE7");e.onClose?e.onClose():"";previousOpen=j.dropCont}},setValue:function(i){var j=i.attr("id");if(i&&i.length&&i.text().toLowerCase()!=="select"){g.setVal_inHiddenField.call(this,i.text(),this.remDelimiter(j))}else{g.setVal_inHiddenField.call(this,"","")}},appendData:function(k){var j="";for(var i in e.data){if(e.textWrap){j+='<li id="'+i+'"><'+e.textWrap+">"+e.data[i]+"</"+e.textWrap+"></li>"}else{j+='<li id="'+i+'">'+e.data[i]+"</li>"}}return"<ul>"+j+"</ul>"},keyCode:function(i){return i.keyCode||i.which},disb_Scroll_handler:function(j){var i=g.keyCode(j);if(i===40||i===38||i===32){j.preventDefault();return false}},disableScroll:function(i){b(window).on("keydown",g.disb_Scroll_handler)},enableScroll:function(i){b(window).off("keydown",g.disb_Scroll_handler)},nextSelection:function(j){var i=j.next();if(i.length){j.removeClass("sAct");this.currActiveItem=i;i.addClass("sAct")}else{i=j}return i},prevSelection:function(j){var i=j.prev();if(i.length){j.removeClass("sAct");this.currActiveItem=i;i.addClass("sAct")}return i},remDelimiter:function(i){return i&&e.sortPrefix?i.replace(e.sortPrefix,""):i}};function c(i){h.call(this,i)}c.prototype=g;this.each(function(){if(!b(this).data("singleDD")){var i=new c(b(this));b(this).data("singleDD",i)}});return this.data("singleDD")}})(jQuery);